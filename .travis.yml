sudo: false

language: java

jdk:
  - oraclejdk7
  - oraclejdk8

cache:
  directories:
    - $HOME/.m2

os:
  - linux

branches:
  except:
  - scala

env:
  matrix:
    - PROFILES='-Pjacoco -Pjdkapicheck'
    - PROFILES='-Pretrolambda'
    - PROFILES='-Pretrolambda -Pjacoco'

install:
    - jdk_switcher use oraclejdk8
    - javac -version
    - mvn ${PROFILES} package -DskipTests=true -Dmaven.javadoc.skip=true -B -V
    - jdk_switcher use default
    - javac -version

script:
    - mvn ${PROFILES} -P!retrolambda test -Dmaven.main.skip=true -B